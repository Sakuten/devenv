version: "3"
services:
  frontend:
    build:
      dockerfile: Dockerfile.dev
      context: ${FRONTEND_DIR}
    ports:
      - "${PORT}:${PORT}"
    depends_on:
      - backend
    environment:
      - API_SERVER="http://${API_HOST}:${API_PORT}"
    command: "--host 0.0.0.0"
    working_dir: "/code"
    volumes:
      - "${FRONTEND_DIR}:/code"
  backend:
    build:
      dockerfile: Dockerfile.dev
      context: ${BACKEND_DIR}
    ports:
      - "${API_PORT}:${API_PORT}"
    environment:
      - FLASK_APP=app.py
      - FLASK_ENV=development
      - FLASK_DEBUG=1
    command: "--host 0.0.0.0"
    working_dir: "/code"
    volumes:
      - "${BACKEND_DIR}:/code"
